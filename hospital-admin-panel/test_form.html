<!DOCTYPE html>
<html>
<head>
    <title>Test Add Patient</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        form { max-width: 400px; }
        label { display: block; margin: 10px 0 5px 0; }
        input, select, textarea { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; }
        button { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        #result { margin-top: 20px; padding: 10px; border-radius: 4px; }
        
        /* Custom Popup Styles */
        .custom-popup-overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          background: rgba(0, 0, 0, 0.5);
          display: none;
          justify-content: center;
          align-items: center;
          z-index: 2000;
          backdrop-filter: blur(4px);
        }
        .custom-popup {
          background: #fff;
          border-radius: 16px;
          padding: 0;
          max-width: 400px;
          width: 90%;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
          transform: scale(0.9);
          opacity: 0;
          transition: all 0.3s ease;
          overflow: hidden;
        }
        .custom-popup.show {
          transform: scale(1);
          opacity: 1;
        }
        .custom-popup-header {
          padding: 20px 24px 16px 24px;
          border-bottom: 1px solid #e5e7eb;
          display: flex;
          align-items: center;
          gap: 12px;
        }
        .custom-popup-header.success {
          background: linear-gradient(135deg, #10b981, #059669);
          color: white;
          border-bottom: none;
        }
        .custom-popup-header.error {
          background: linear-gradient(135deg, #ef4444, #dc2626);
          color: white;
          border-bottom: none;
        }
        .custom-popup-header.warning {
          background: linear-gradient(135deg, #f59e0b, #d97706);
          color: white;
          border-bottom: none;
        }
        .custom-popup-header.info {
          background: linear-gradient(135deg, #3b82f6, #2563eb);
          color: white;
          border-bottom: none;
        }
        .custom-popup-icon {
          font-size: 1.5rem;
          width: 24px;
          height: 24px;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        .custom-popup-title {
          font-size: 1.1rem;
          font-weight: 600;
          margin: 0;
        }
        .custom-popup-body {
          padding: 20px 24px;
          color: #222;
          line-height: 1.5;
        }
        .custom-popup-footer {
          padding: 16px 24px 20px 24px;
          display: flex;
          gap: 12px;
          justify-content: flex-end;
        }
        .custom-popup-btn {
          padding: 10px 20px;
          border: none;
          border-radius: 8px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s ease;
          font-size: 0.95rem;
        }
        .custom-popup-btn.primary {
          background: #2563eb;
          color: white;
        }
        .custom-popup-btn.primary:hover {
          background: #1d4ed8;
          transform: translateY(-1px);
        }
        .custom-popup-btn.secondary {
          background: #f3f4f6;
          color: #222;
        }
        .custom-popup-btn.secondary:hover {
          background: #e5e7eb;
        }
    </style>
</head>
<body>
    <h2>Test Add Patient Form</h2>
    <form action="admin/php/add_patient.php" method="POST">
        <label>Name: <input type="text" name="name" value="Test Patient" required></label><br><br>
        <label>Age: <input type="number" name="age" value="25" required></label><br><br>
        <label>Gender: 
            <select name="gender" required>
                <option value="">Select Gender</option>
                <option value="Male" selected>Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
            </select>
        </label><br><br>
        <label>Contact: <input type="text" name="contact" value="9876543210" required></label><br><br>
        <label>Address: <textarea name="address" required>Test Address, Test City</textarea></label><br><br>
        <button type="submit">Add Patient</button>
    </form>
    
    <h3>Test Results:</h3>
    <div id="result"></div>
    
    <!-- Custom Popup Overlay -->
    <div id="customPopupOverlay" class="custom-popup-overlay">
      <div id="customPopup" class="custom-popup">
        <div id="customPopupHeader" class="custom-popup-header">
          <div id="customPopupIcon" class="custom-popup-icon"></div>
          <h3 id="customPopupTitle" class="custom-popup-title"></h3>
        </div>
        <div id="customPopupBody" class="custom-popup-body"></div>
        <div id="customPopupFooter" class="custom-popup-footer">
          <button id="customPopupCancel" class="custom-popup-btn secondary">Cancel</button>
          <button id="customPopupConfirm" class="custom-popup-btn primary">OK</button>
        </div>
      </div>
    </div>
    
    <script>
        // Custom Popup System
        function showCustomPopup(options = {}) {
          const {
            type = 'info',
            title = 'Information',
            message = '',
            showCancel = false,
            confirmText = 'OK',
            cancelText = 'Cancel',
            onConfirm = null,
            onCancel = null
          } = options;
          
          const overlay = document.getElementById('customPopupOverlay');
          const popup = document.getElementById('customPopup');
          const header = document.getElementById('customPopupHeader');
          const icon = document.getElementById('customPopupIcon');
          const titleEl = document.getElementById('customPopupTitle');
          const body = document.getElementById('customPopupBody');
          const footer = document.getElementById('customPopupFooter');
          const confirmBtn = document.getElementById('customPopupConfirm');
          const cancelBtn = document.getElementById('customPopupCancel');
          
          // Set content
          titleEl.textContent = title;
          body.textContent = message;
          confirmBtn.textContent = confirmText;
          cancelBtn.textContent = cancelText;
          
          // Set type-specific styling
          header.className = `custom-popup-header ${type}`;
          
          // Set icon based on type
          const icons = {
            success: '✓',
            error: '✕',
            warning: '⚠',
            info: 'ℹ'
          };
          icon.textContent = icons[type] || icons.info;
          
          // Show/hide cancel button
          cancelBtn.style.display = showCancel ? 'block' : 'none';
          
          // Show popup
          overlay.style.display = 'flex';
          setTimeout(() => popup.classList.add('show'), 10);
          
          // Handle confirm button
          const handleConfirm = () => {
            hideCustomPopup();
            if (onConfirm) onConfirm();
          };
          
          // Handle cancel button
          const handleCancel = () => {
            hideCustomPopup();
            if (onCancel) onCancel();
          };
          
          // Remove existing listeners
          confirmBtn.replaceWith(confirmBtn.cloneNode(true));
          cancelBtn.replaceWith(cancelBtn.cloneNode(true));
          
          // Add new listeners
          document.getElementById('customPopupConfirm').addEventListener('click', handleConfirm);
          document.getElementById('customPopupCancel').addEventListener('click', handleCancel);
          
          // Close on overlay click
          overlay.addEventListener('click', (e) => {
            if (e.target === overlay) {
              handleCancel();
            }
          });
          
          // Close on Escape key
          const handleEscape = (e) => {
            if (e.key === 'Escape') {
              handleCancel();
              document.removeEventListener('keydown', handleEscape);
            }
          };
          document.addEventListener('keydown', handleEscape);
        }
        
        function hideCustomPopup() {
          const overlay = document.getElementById('customPopupOverlay');
          const popup = document.getElementById('customPopup');
          
          popup.classList.remove('show');
          setTimeout(() => {
            overlay.style.display = 'none';
          }, 300);
        }
        
        // Simple alert replacement
        function showAlert(message, type = 'info') {
          showCustomPopup({
            type: type,
            title: type.charAt(0).toUpperCase() + type.slice(1),
            message: message
          });
        }
        
        document.querySelector('form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            
            fetch('admin/php/add_patient.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showAlert('Patient added successfully!', 'success');
                    document.getElementById('result').innerHTML = 
                        '<p style="color: green;">' + JSON.stringify(data, null, 2) + '</p>';
                } else {
                    showAlert('Error: ' + (data.message || 'Unknown error'), 'error');
                    document.getElementById('result').innerHTML = 
                        '<p style="color: red;">' + JSON.stringify(data, null, 2) + '</p>';
                }
            })
            .catch(error => {
                showAlert('Error: ' + error.message, 'error');
                document.getElementById('result').innerHTML = 
                    '<p style="color: red;">Error: ' + error.message + '</p>';
            });
        });
    </script>
</body>
</html> 